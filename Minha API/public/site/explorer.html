<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorer - SONAR</title>
    <link rel="stylesheet" href="css/styles_ex.css">
    <link rel="shortcut icon" href="assets/icon/favicon2.ico" type="image/x-icon">
</head>

<body>
    <div class="bar_lateral">
        <div class="bar_titulo">
            SONAR
        </div>
        <div class="bar_nome_user">
            <a href="perfil.html">
                <div id="div_nome_user">
                    NOME USER
                </div>
            </a>
        </div>
        <div class="bar_p_e">
            <a href="explorer.html">
                EXPLORER
            </a>
        </div>
        <div class="bar_new">
            <a href="newpost.html">
                NEW POST
            </a>
        </div>
        <div class="bar_sair">
            <button onclick="sair()">
                SAIR
            </button>
        </div>
    </div>

    <div class="container" id="container">
    </div>
</body>

</html>
<script>

    // Para exibir o nome do usuario logado
    // utilizamos o dado da sessão do login
    var idUsuario = sessionStorage.ID_USUARIO
    var nomeUsuario = sessionStorage.NOME_USUARIO
    var email = sessionStorage.EMAIL_USUARIO
    var descricaoUsuario = sessionStorage.DESCRICAO_USUARIO
    var imagem_perfil = sessionStorage.IMAGEM_PERFIL


    div_nome_user.innerHTML = `Olá, ${nomeUsuario}`

    fetch("/explorer/listar")

        // Se a requisição der certo, pegue esses dados
        .then(res => res.json())

        // eu exibo os meus dados.json(res) em dados_post
        //    (res =>)
        .then(dados_post => {

            // agora eu posso fazer o que eu quiser com esses dados
            for (var contador = 0; contador < dados_post.length; contador++) {

                // Essa var vem como array com vários objetos
                var post = dados_post[contador]

                // para usar cada ojetivo individualmente eu utilizo o nome da var "post". "nome do campo"
                var nome = post.nome
                var idPost = post.idPost
                var descricao = post.descricao
                var imagem_post = post.imagem_post


                container.innerHTML += `
            <div class="post">
            <div class="post_user">
                ${post.nome}
            </div>
            <div class="img_post">
                <img src="assets/imgs/image 2.svg" alt="">
            </div>
            <div class="curtida">
                <button onclick="curtida()" id="${post.idPost}">
                    <div class="cond_curtida" id="ID DO POST (BANCO DE DADOS)">
                        <img src="assets/imgs/coracao preto e branco.svg" alt="">
                    </div>
                </button>
                <div class="qtd_curtida">
                    123
                </div>
            </div>
            <div class="desc_post">
                <div class="desc_user">
                    ${post.nome}
                </div>
                <div class="desc_txt">
                    ${post.descricao}
                </div>
            </div>
        </div>`

                console.log("post separado", post)
            }
        })

    var cor_curtida = 0
    function curtida() {
        if (cor_curtida == 0) {
            id_post.innerHTML =
                `<img src="assets/imgs/coracao vermelho.svg" alt="">`
            cor_curtida++
        } else {
            cor_curtida--
            id_post.innerHTML =
                `<img src="assets/imgs/coracao preto e branco.svg" alt="">`
        }
    }


    function sair() {
        sessionStorage.clear()
        window.location = "../index.html"
    }
</script>